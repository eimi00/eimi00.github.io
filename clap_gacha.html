<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚‚ã¡ã¾ã‚ã‚¬ãƒãƒ£ï½œã»ã‚ã»ã‚åº­</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
        "ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ ProN", "Yu Gothic", sans-serif;
      background: #fffaf4;
      padding: 32px 16px 48px;
      text-align: center;
      color: #4b3b32;
    }

    h1 {
      font-size: 1.5rem;
      margin-bottom: 4px;
    }

    .lead {
      font-size: 0.95rem;
      margin-bottom: 20px;
      color: #777;
      line-height: 1.6;
    }

    .gacha-container {
      max-width: 420px;
      margin: 0 auto;
      background: #ffffffcc;
      border-radius: 24px;
      padding: 24px 16px 20px;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.08);
      position: relative;
      overflow: hidden;
    }

    /* ã‚¬ãƒãƒ£æœ¬ä½“ */

    .gacha-machine {
      position: relative;
      width: 220px;
      margin: 0 auto 8px;
    }

    .gacha-machine-img {
      width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    /* ã·ã‚‹ã·ã‚‹æºã‚Œã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */

    @keyframes gacha-shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-4px) rotate(-1deg); }
      40% { transform: translateX(4px) rotate(1deg); }
      60% { transform: translateX(-3px) rotate(-1deg); }
      80% { transform: translateX(3px) rotate(1deg); }
      100% { transform: translateX(0) rotate(0deg); }
    }

    .is-shaking {
      animation: gacha-shake 0.45s ease;
    }

    /* ãƒœã‚¿ãƒ³ */

    .gacha-button {
      display: inline-block;
      margin: 6px 0 12px;
      padding: 10px 22px;
      border-radius: 999px;
      border: none;
      background: #ffdfe8;
      font-size: 0.95rem;
      cursor: pointer;
      box-shadow: 0 3px 0 #f0b6c9;
      transition: transform 0.05s ease, box-shadow 0.05s ease, opacity 0.2s;
    }

    .gacha-button:hover:not(:disabled) {
      transform: translateY(1px);
      box-shadow: 0 2px 0 #f0b6c9;
      opacity: 0.95;
    }

    .gacha-button:active:not(:disabled) {
      transform: translateY(2px);
      box-shadow: 0 0 0 #f0b6c9;
    }

    .gacha-button:disabled {
      opacity: 0.6;
      cursor: default;
    }

    .hint {
      font-size: 0.8rem;
      color: #999;
      margin-bottom: 10px;
    }

    /* çµæœã‚«ãƒ¼ãƒ‰ */

    .result-card {
      margin-top: 6px;
      border-radius: 20px;
      background: #fffdf8;
      padding: 14px 10px 12px;
      border: 1px solid #f2e2cf;
    }

    .result-label {
      font-size: 0.8rem;
      letter-spacing: 0.08em;
      color: #b39a7e;
      margin-bottom: 6px;
    }

    .rarity {
      font-size: 0.85rem;
      margin-bottom: 6px;
    }

    .rarity span {
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.8rem;
      border: 1px dashed #f1c7d4;
      background: #fff4f7;
    }

    .result-image-wrapper {
      max-width: 260px;
      margin: 0 auto 8px;
    }

    .result-image {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 16px;
      background: #fff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.06);
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.35s ease, transform 0.35s ease;
    }

    .result-image.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    .result-title {
      font-size: 0.9rem;
      margin-bottom: 4px;
    }

    .result-text {
      font-size: 0.8rem;
      color: #7f705f;
      line-height: 1.6;
      white-space: pre-line;
    }

    .back-link {
      margin-top: 18px;
      font-size: 0.85rem;
    }

    .back-link a {
      color: #8f7f73;
      text-decoration: none;
    }

    .back-link a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>æ‹æ‰‹ã‚ã‚ŠãŒã¨ã†ğŸŒ·</h1>
  <p class="lead">
    ã»ã‚ã»ã‚åº­ã«æ‹æ‰‹ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚<br />
    ãŠç¤¼ã«ã€ã‚‚ã¡ã¾ã‚ã‚¬ãƒãƒ£ã‚’1å›ã©ã†ãâ€¦ğŸ
  </p>

  <div class="gacha-container">
    <!-- ã‚¬ãƒãƒ£æœ¬ä½“ã‚¤ãƒ©ã‚¹ãƒˆï¼ˆâ˜…ã“ã“ã¯ã‚¨ã‚¤ãƒŸ00ã®ã‚¤ãƒ©ã‚¹ãƒˆã«å·®ã—æ›¿ãˆäºˆå®šï¼‰ -->
    <div class="gacha-machine" id="gacha-machine">
      <img
        src="img/gacha_machine_sample.png"
        alt="ã‚‚ã¡ã¾ã‚ã‚¬ãƒãƒ£"
        class="gacha-machine-img"
      />
    </div>

    <button class="gacha-button" id="gacha-button">1å›ã¾ã‚ã™</button>
    <p class="hint">â€»æŠ¼ã™ãŸã³ã«ãƒ©ãƒ³ãƒ€ãƒ ã§ã‚¤ãƒ©ã‚¹ãƒˆãŒå‡ºã¦ãã‚‹ã‚ˆ</p>

    <div class="result-card">
      <div class="result-label">ä»Šå›ã®ã‚¬ãƒãƒ£çµæœ</div>
      <div class="rarity" id="rarity">
        <!-- ã“ã“ã«ã€ŒğŸŒŸãƒ¬ã‚¢ã€ãªã©ãŒå…¥ã‚‹ -->
      </div>

      <div class="result-image-wrapper">
        <img
          id="result-image"
          class="result-image"
          src=""
          alt="ã‚¬ãƒãƒ£ã§å‡ºãŸã‚¤ãƒ©ã‚¹ãƒˆ"
        />
      </div>

      <div class="result-title" id="result-title"></div>
      <div class="result-text" id="result-text"></div>
    </div>
  </div>

  <div class="back-link">
    <a href="/index.html">â† ã»ã‚ã»ã‚åº­ã«ã‚‚ã©ã‚‹</a>
  </div>

  <script>
    // â˜…â˜… ã“ã“ã«ã‚¬ãƒãƒ£ã®ä¸­èº«ã‚’å®šç¾©ã™ã‚‹ â˜…â˜…
    // src: ç”»åƒãƒ‘ã‚¹ / title: ã‚¤ãƒ©ã‚¹ãƒˆã®ã‚¿ã‚¤ãƒˆãƒ« / text: ä¸€è¨€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ / rarity: ãƒ¬ã‚¢ãƒªãƒ†ã‚£è¡¨ç¤º
    const gachaItems = [
      {
        src: "img/clap_01.png",
        title: "ã‚‚ã¡ã¾ã‚ã®ãŠã‚„ã¤ã‚¿ã‚¤ãƒ ",
        text: "ã®ã‚“ã³ã‚ŠãŠã‚„ã¤ä¼‘æ†©ä¸­ã®ã‚‚ã¡ã¾ã‚ã€‚\nã‚¨ã‚¤ãƒŸ00ã«ã‚‚ä¼‘æ†©æ™‚é–“ãŒã¡ã‚ƒã‚“ã¨å±Šãã¾ã™ã‚ˆã†ã«ğŸª",
        rarity: "â­ ãƒãƒ¼ãƒãƒ«"
      },
      {
        src: "img/clap_02.png",
        title: "ã¾ã©ã‚ã¿ã‚‚ã¡ã¾ã‚",
        text: "ãŠã²ã‚‹ã­å‰ã®ã€ãµã«ã‚ƒãµã«ã‚ƒã‚¿ã‚¤ãƒ ã€‚\nãã‚‡ã†ã‚‚ä¸€æ—¥ã€ãŠã¤ã‹ã‚Œã•ã¾â€¦ğŸ«§",
        rarity: "â­â­ ã¡ã‚‡ã£ã¨ãƒ¬ã‚¢"
      },
      {
        src: "img/clap_03.png",
        title: "ã‚¨ã‚¤ãƒŸ00ã¨ãŠã—ã‚ƒã¹ã‚Š",
        text: "ã‚¨ã‚¤ãƒŸ00ã¨å°å£°ã§ãªã„ã—ã‚‡è©±ã€‚\nã€Œæ‹æ‰‹ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã ã‚ˆã€œã€",
        rarity: "â­â­â­ ãƒ¬ã‚¢"
      },
      {
        src: "img/clap_04.png",
        title: "ã¿ãŸã‚‰ã—å›£å­ã‚’å®ˆã‚Œï¼",
        text: "ã‚‚ã¡ã¾ã‚ã®å¤§å¥½ç‰©ã‚’æ­»å®ˆä¸­ã€‚\nã„ã„ã“ã¨ã‚ã‚‹ã‹ã‚‚ï¼ŸğŸ¡",
        rarity: "ğŸŒŸ ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ"
      }
    ];

    const machineEl = document.getElementById("gacha-machine");
    const buttonEl = document.getElementById("gacha-button");

    const resultImgEl = document.getElementById("result-image");
    const resultTitleEl = document.getElementById("result-title");
    const resultTextEl = document.getElementById("result-text");
    const rarityEl = document.getElementById("rarity");

    let lastIndex = -1;

    function rollGacha() {
      if (gachaItems.length === 0) return;

      // ãƒœã‚¿ãƒ³é€£æ‰“é˜²æ­¢
      buttonEl.disabled = true;

      // ã‚¬ãƒãƒ£æœ¬ä½“ã·ã‚‹ã·ã‚‹
      machineEl.classList.add("is-shaking");

      // ã¡ã‚‡ã£ã¨å¾…ã£ã¦ã‹ã‚‰çµæœè¡¨ç¤ºï¼ˆæ¼”å‡ºç”¨ï¼‰
      setTimeout(() => {
        machineEl.classList.remove("is-shaking");

        // ãƒ©ãƒ³ãƒ€ãƒ é¸æŠï¼ˆå‰å›ã¨åŒã˜ã ã£ãŸã‚‰ã‚ºãƒ©ã™ï¼‰
        let index = Math.floor(Math.random() * gachaItems.length);
        if (gachaItems.length > 1 && index === lastIndex) {
          index = (index + 1) % gachaItems.length;
        }
        lastIndex = index;

        const item = gachaItems[index];

        // ç”»åƒãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ç”¨ã«ä¸€æ—¦éè¡¨ç¤ºçŠ¶æ…‹ã«
        resultImgEl.classList.remove("is-visible");
        resultImgEl.src = item.src;
        resultImgEl.alt = item.title;

        // ãƒ†ã‚­ã‚¹ãƒˆç³»
        resultTitleEl.textContent = item.title;
        rarityEl.innerHTML = item.rarity
          ? `<span>${item.rarity}</span>`
          : "";
        resultTextEl.textContent = item.text || "";

        // å°‘ã—é…ã‚‰ã›ã¦ãµã‚ã£ã¨è¡¨ç¤º
        setTimeout(() => {
          resultImgEl.classList.add("is-visible");
          buttonEl.disabled = false;
        }, 50);
      }, 450); // ã‚¬ãƒãƒ£æºã‚Œã®æ™‚é–“ã¨åˆã‚ã›ã‚‹
    }

    // ãƒœã‚¿ãƒ³æŠ¼ã—ãŸã¨ã
    buttonEl.addEventListener("click", rollGacha);

    // æœ€åˆã«1å›ã ã‘è‡ªå‹•ã§å›ã—ã¦ãŠããªã‚‰ã“ã‚Œ
    // window.addEventListener("DOMContentLoaded", rollGacha);
  </script>
</body>
</html>
